@using Shield.Common.Constants
@using Shield.Common.Models.MyLearning
@using Shield.Ui.App.Common
@* @model Shield.Ui.App.ViewModels.CheckInPartialViewModel *@
@* @model List<MyLearningDataResponse> *@

@model IEnumerable<Shield.Common.Models.MyLearning.Interfaces.IMyLearningDataResponse>


<table class="training-check-table">
    @if (Model != null && Model.Any(x => x.IsTrainingValid))
    {
        <tr class="check-row training-check-row-divider">
            <td class="opblock-completed training-check-header">
                <strong class="opblock-summary-method">Complete</strong>
            </td>
            <td class="training-check-center complete-header">
                <span class="muted-text">
                    @string.Join(", ", Model.Where(x => x.IsTrainingValid).Select(x => x.CertCode))
                </span>
            </td>
            <td class="training-check-accordion complete-header">
                <span onclick="toggleTrainingAccordion('completed-trainings-details','completed-accordion-icon')" class="accordion-toggle">
                    <i id="completed-accordion-icon" class="fa fa-chevron-down accordion-icon"></i>
                </span>
            </td>
        </tr>
        <tr id="completed-trainings-details" hidden>
            <td colspan="3" class="details">
                <table class="inner-check-table">
                    @foreach (var trainingData in Model.Where(x => x.IsTrainingValid))
                    {
                        <tr class="inner-row inner-row-divider">
                            <td class="inner-name muted-text">@trainingData.Name</td>
                            <td class="inner-code muted-text">@trainingData.CertCode</td>
                            <td class="inner-status"><i class="fa fa-check status-icon-green"></i></td>
                        </tr>
                    }
                </table>
            </td>
        </tr>
    }

    @if (Model != null && Model.Any(x => !x.IsTrainingValid))
    {
        <tr class="check-row training-check-row-divider">
            <td class="training-check-header incomplete-header opblock-incompleted">
                <strong>Incomplete</strong>
            </td>
            <td class="training-check-center incomplete-header">
                <span class="muted-text">
                    @string.Join(", ", Model.Where(x => !x.IsTrainingValid).Select(x => x.CertCode))
                </span>
            </td>
            <td class="training-check-accordion incomplete-header">
                <span onclick="toggleTrainingAccordion('incomplete-trainings-details','incomplete-accordion-icon')" class="accordion-toggle">
                    <i id="incomplete-accordion-icon" class="fa fa-chevron-up accordion-icon"></i>
                </span>
            </td>
        </tr>
        <tr id="incomplete-trainings-details">
            <td colspan="3" class="details">
                <table class="inner-check-table">
                    @foreach (var trainingData in Model.Where(x => !x.IsTrainingValid))
                    {
                        <tr class="inner-row inner-row-divider">
                            <td class="inner-name muted-text">@trainingData.Name</td>
                            <td class="inner-code muted-text">@trainingData.CertCode</td>
                            <td class="inner-status"><i class="fa fa-times status-icon-red"></i></td>
                        </tr>
                    }
                </table>
            </td>
        </tr>
    }
</table>

@* 
<table class="training-check-table">
    <!-- Completed Trainings Row - Collapsible -->
    @if (Model.UserTrainingData.Any(x => x.IsTrainingValid))
    {
        <tr class="check-row training-check-row-divider">
            <td class="opblock-completed training-check-header">
                <strong class="opblock-summary-method">Complete</strong>
            </td>
            <td class="training-check-center complete-header">
                <span class="muted-text">
                    @string.Join(", ", Model.UserTrainingData.Where(x => x.IsTrainingValid).Select(x => x.CertCode))
                </span>
            </td>
            <td class="training-check-accordion complete-header">
                <span onclick="toggleTrainingAccordion('completed-trainings-details','completed-accordion-icon')" class="accordion-toggle">
                    <i id="completed-accordion-icon" class="fa fa-chevron-down accordion-icon"></i>
                </span>
            </td>
        </tr>
        <tr id="completed-trainings-details" hidden>
            <td colspan="3" class="details">
                <table class="inner-check-table">
                    @foreach (var trainingData in Model.UserTrainingData.Where(x => x.IsTrainingValid))
                    {
                        <tr class="inner-row inner-row-divider">
                            <td class="inner-name muted-text">
                             @trainingData.Name
                            </td>
                            <td class="inner-code muted-text">
                                @trainingData.CertCode
                            </td>
                            <td class="inner-status">
                                <i class="fa fa-check status-icon-green"></i>
                            </td>
                        </tr>
                    }
                </table>
            </td>
        </tr>
    }

    <!-- Incomplete Trainings Section - Collapsible -->
    @if (Model.UserTrainingData.Any(x => !x.IsTrainingValid))
    {
        <tr class="check-row training-check-row-divider">
            <td class="training-check-header incomplete-header opblock-incompleted">
                <strong>Incomplete</strong>
            </td>
            <td class="training-check-center incomplete-header">
                <span class="muted-text">
                    @string.Join(", ", Model.UserTrainingData.Where(x => !x.IsTrainingValid).Select(x => x.CertCode))
                </span>
            </td>
            <td class="training-check-accordion incomplete-header">
                <span onclick="toggleTrainingAccordion('incomplete-trainings-details','incomplete-accordion-icon')" class="accordion-toggle">
                    <i id="incomplete-accordion-icon" class="fa fa-chevron-up accordion-icon"></i>
                </span>
            </td>
        </tr>
        <tr id="incomplete-trainings-details">
            <td colspan="3" class="details">
                <table class="inner-check-table">
                    @foreach (var trainingData in Model.UserTrainingData.Where(x => !x.IsTrainingValid))
                    {
                        <tr class="inner-row inner-row-divider">
                            <td class="inner-name muted-text">
                             @trainingData.Name 
                            </td>
                            <td class="inner-code muted-text">
                                @trainingData.CertCode
                            </td>
                            <td class="inner-status">
                                <i class="fa fa-times status-icon-red"></i>
                            </td>
                        </tr>
                    }
                </table>
            </td>
        </tr>
    }
</table> *@
